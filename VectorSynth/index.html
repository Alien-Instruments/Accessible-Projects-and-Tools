<!DOCTYPE html>
<html lang="en">

<head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Document</title>
                    <link rel="stylesheet" href="styles/granite.css" id="Granite">
                    <link rel="stylesheet" href="styles/polar.css" id="Polar" disabled />
                    <link rel="stylesheet" href="styles/future.css" id="Future" disabled />
                    <link rel="stylesheet" href="styles/retro.css" id="Retro" disabled />
</head>

<body class="desktop">

                    <div id="save-modal" class="modal hidden">
                                        <div class="modal-content">
                                                            <h3>Save MIDI Maping</h3>
                                                            <input type="text" id="save-preset-name"
                                                                                placeholder="Preset name" />
                                                            <button class="lcd-button"
                                                                                id="save-confirm-btn">Save</button>
                                                            <button class="close-modal lcd-button">Cancel</button>
                                        </div>
                    </div>


                    <div id="export-modal" class="modal hidden">
                                        <div class="modal-content">
                                                            <h3>Export Current Mapping</h3>
                                                            <input type="text" id="export-filename"
                                                                                placeholder="Filename" />
                                                            <button class="lcd-button"
                                                                                id="export-confirm-btn">Export</button>
                                                            <button class="close-modal lcd-button">Cancel</button>
                                        </div>
                    </div>


                    <div id="clear-modal" class="modal hidden">
                                        <div class="modal-content">
                                                            <h3>Clear All MIDI Mappings?</h3>
                                                            <p>This will remove all saved CC assignments. This action
                                                                                cannot be undone.</p>
                                                            <button class="lcd-button"
                                                                                id="clear-confirm-btn">Clear</button>
                                                            <button class="close-modal lcd-button">Cancel</button>
                                        </div>
                    </div>

                    <!-- Save Audio Preset Modal -->
                    <div id="audio-save-modal" class="modal hidden">
                                        <div class="modal-content">
                                                            <h3>Save Audio Preset</h3>
                                                            <input type="text" id="audio-save-preset-name"
                                                                                placeholder="Preset name" />
                                                            <button class="lcd-button"
                                                                                id="audio-save-confirm-btn">Save</button>
                                                            <button class="close-modal lcd-button">Cancel</button>
                                        </div>
                    </div>

                    <!-- Export Audio Presets Modal -->
                    <div id="audio-export-modal" class="modal hidden">
                                        <div class="modal-content">
                                                            <h3>Export Audio Presets</h3>
                                                            <input type="text" id="audio-export-filename"
                                                                                placeholder="Filename" />
                                                            <button class="lcd-button"
                                                                                id="audio-export-confirm-btn">Export</button>
                                                            <button class="close-modal lcd-button">Cancel</button>
                                        </div>
                    </div>

                    <div id="audio-delete-modal" class="modal hidden">
                                        <div class="modal-content">
                                                            <h3>Delete Audio Preset?</h3>
                                                            <p id="audio-delete-modal-preset-name"></p>
                                                            <button class="lcd-button"
                                                                                id="audio-delete-confirm-btn">Delete</button>
                                                            <button class="close-modal lcd-button">Cancel</button>
                                        </div>
                    </div>


                    <div id="midi-delete-modal" class="modal hidden">
                                        <div class="modal-content">
                                                            <h3>Delete MIDI Preset?</h3>
                                                            <p id="midi-delete-modal-preset-name"></p>
                                                            <button class="lcd-button"
                                                                                id="midi-delete-confirm-btn">Delete</button>
                                                            <button class="close-modal lcd-button">Cancel</button>
                                        </div>
                    </div>

                    <div id="shortcuts-panel" style="display: none;">
                                        <h3>Edit Keyboard Shortcuts</h3>
                                        <div id="shortcut-warning"
                                                            style="color: #f66; font-weight: bold; min-height:1.2em">
                                        </div>
                                        <div id="shortcuts-list"></div>
                                        <button class="lcd-button" id="close-shortcuts">Close</button>


                    </div>
                    <div id="manual-modal" class="modal" style="display: none;">
                                        <div class="modal-backdrop"></div>
                                        <div class="modal-dialog" role="dialog" aria-modal="true"
                                                            aria-labelledby="manual-modal-title">
                                                            <button class="modal-close"
                                                                                aria-label="Close Manual">&times;</button>
                                                            <h2 id="manual-modal-title">Synth Manual</h2>
                                                            <div id="manual-container"></div>
                                        </div>
                    </div>

                    <div class="synth">
                                        <div
                                                            style="display: flex; flex-direction: row; margin-top: 20px; flex-wrap: wrap; width: 90%; justify-content: center;">
                                                            <div
                                                                                style="display: flex; flex-direction: column; text-align: center;">
                                                                                <label for="theme-select">Theme</label>
                                                                                <select class="lcd-select"
                                                                                                    id="theme-select">
                                                                                                    <option
                                                                                                                        value="Granite">
                                                                                                                        Granite
                                                                                                    </option>
                                                                                                    <option
                                                                                                                        value="Polar">
                                                                                                                        Polar
                                                                                                    </option>
                                                                                                    <option
                                                                                                                        value="Future">
                                                                                                                        Future
                                                                                                    </option>
                                                                                                    <option
                                                                                                                        value="Retro">
                                                                                                                        Retro
                                                                                                    </option>

                                                                                </select>
                                                            </div>

                                                            <button class="lcd-button" id="toggle-manual-btn">Show
                                                                                Manual</button>
                                                            <button class="lcd-button" id="toggle-midi-learn"
                                                                                data-label="MIDI Learn">Show
                                                                                MIDI
                                                                                Learn</button>
                                                            <button class="lcd-button" id="toggle-audio-preset-controls"
                                                                                data-label="Audio Presets">Show Audio
                                                                                Presets</button>
                                                            <button class="lcd-button" id="toggle-midi-mod"
                                                                                data-label="MIDI Mod">Show
                                                                                MIDI Mod</button>
                                                            <button class="lcd-button" id="voice-btn">Speak
                                                                                Command</button>
                                                            <label class="checkbox-container">
                                                                                <input type="checkbox"
                                                                                                    class="checkbox-input"
                                                                                                    id="announce-toggle" />
                                                                                <span class="checkbox-button">Speak
                                                                                                    Voice Control
                                                                                                    feedback</span>
                                                            </label>
                                                            <button class="lcd-button" id="open-shortcuts">Edit
                                                                                Shortcuts</button>
                                                            <button class="lcd-button" id="toggleMusicalTyping">Disable
                                                                                Musical Typing</button>
                                                            <button class="lcd-button" id="toggle-mpe">Enable
                                                                                MPE</button>
                                                            <button class="lcd-button" id="toggle-arp"
                                                                                data-label="Arp">Show
                                                                                Arp</button>
                                        </div>
                                        <div id="MPE-Mod" style="display: none;" tabindex="-1">
                                                            <div
                                                                                style="display: flex; flex-direction: column; text-align: center;">
                                                                                <label for="pitchBendDest">
                                                                                                    Pitch Bend maps
                                                                                                    to:</label>
                                                                                <select class="lcd-select"
                                                                                                    id="pitchBendDest">

                                                                                </select>
                                                            </div>
                                                            <div
                                                                                style="display: flex; flex-direction: column; text-align: center;">
                                                                                <label for="aftertouchDest">
                                                                                                    Aftertouch maps
                                                                                                    to:</label>
                                                                                <select class="lcd-select"
                                                                                                    id="aftertouchDest"></select>

                                                            </div>
                                                            <div
                                                                                style="display: flex; flex-direction: column; text-align: center;">
                                                                                <label for="modWheelDest">
                                                                                                    Mod Wheel maps
                                                                                                    to:</label>
                                                                                <select class="lcd-select"
                                                                                                    id="modWheelDest"></select>
                                                            </div>
                                                            <div
                                                                                style="display: flex; flex-direction: column; text-align: center;">
                                                                                <label for="slideDest">
                                                                                                    Slide maps
                                                                                                    to:</label>
                                                                                <select class="lcd-select"
                                                                                                    id="slideDest"></select>

                                                            </div>

                                        </div>

                                        <div class="audio-preset-controls hidden" id="audio-preset-controls"
                                                            tabindex="-1">
                                                            <div style="display: flex; flex-direction: column;">
                                                                                <button class="lcd-button"
                                                                                                    id="open-audio-save-modal">Save
                                                                                                    Audio
                                                                                                    Preset</button>
                                                                                <button class="lcd-button"
                                                                                                    id="open-audio-export-modal">Export
                                                                                                    Audio
                                                                                                    Presets</button>
                                                                                <label tabindex="0" class="lcd-button"
                                                                                                    id="import-audio-label">Import
                                                                                                    Audio
                                                                                                    Presets
                                                                                                    <input type="file" id="import-audio-file"
                                                                                                                        accept=".json"
                                                                                                                        hidden />
                                                                                </label>
                                                            </div>
                                                            <div id="audio-preset-list" class="lcd-panel">
                                                            </div>
                                        </div>

                                        <div class="midi-learn hidden" id="midi-learn" tabindex="-1">

                                                            <div id="midi-mapping-list" class="lcd-panel">
                                                            </div>

                                                            <div style="display: flex; flex-direction: column;"
                                                                                class="midi-preset-controls">

                                                                                <button class="lcd-button"
                                                                                                    id="save-preset">Save
                                                                                                    Preset</button>
                                                                                <button class="lcd-button"
                                                                                                    id="export-cc-btn">Export</button>
                                                                                <label tabindex="0" class="lcd-button"
                                                                                                    id="import-label"
                                                                                                    style="text-align: center;">
                                                                                                    Import
                                                                                                    <input type="file" id="import-cc-file"
                                                                                                                        accept=".json"
                                                                                                                        hidden />
                                                                                </label>
                                                                                <button class="lcd-button"
                                                                                                    id="clear-mappings-btn">Clear
                                                                                                    All
                                                                                                    Mappings</button>

                                                            </div>

                                                            <div id="midi-preset-list" class="lcd-panel">
                                                            </div>

                                        </div>



                                        <div id="midi-ui"></div>


                                        <div style="display: flex; flex-direction: row; justify-content: center;">
                                                            <div id="vector-ui"></div>
                                                            <div id="output">
                                                                                <canvas id="outputMeterCanvas"
                                                                                                    width="50"
                                                                                                    height="225"
                                                                                                    style="background:#111; border-radius:4px; border: 1px solid grey;"></canvas>
                                                            </div>
                                        </div>
                                        <div id="synth-ui">

                                                            <div class="arp hidden" id="arp" style="overflow-x: auto;"
                                                                                tabindex="-1">

                                                                                <div class="arp-panel"
                                                                                                    style="display: flex; flex-direction: column; align-items: center;">
                                                                                                    <label
                                                                                                                        for="arp-mode">Arp
                                                                                                                        Mode</label>
                                                                                                    <select style="width: 200px;"
                                                                                                                        class="lcd-select"
                                                                                                                        id="arp-mode">
                                                                                                                        <option
                                                                                                                                            value="up">
                                                                                                                                            Up
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="down">
                                                                                                                                            Down
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="updown">
                                                                                                                                            Up/Down
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="random">
                                                                                                                                            Random
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="converge">
                                                                                                                                            Converge
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="diverge">
                                                                                                                                            Diverge
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="pairs">
                                                                                                                                            Pairs
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="pedal">
                                                                                                                                            Pedal
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="randomwalk">
                                                                                                                                            Randomwalk
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="euclidean">
                                                                                                                                            Euclidean
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="up2down1">
                                                                                                                                            Up
                                                                                                                                            2
                                                                                                                                            Down
                                                                                                                                            1
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="up3down1">
                                                                                                                                            Up
                                                                                                                                            3
                                                                                                                                            Down
                                                                                                                                            1
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="zigzag">
                                                                                                                                            Zigzag
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="mirror">
                                                                                                                                            Mirror
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="pendulum">
                                                                                                                                            Pendulum
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="brownian">
                                                                                                                                            Brownian
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="polyrhythm">
                                                                                                                                            Polyrhythm
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="stepskip">
                                                                                                                                            Step
                                                                                                                                            Skip
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="spiral">
                                                                                                                                            Spiral
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="fractal">
                                                                                                                                            Fractal
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="echo">
                                                                                                                                            Echo
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="clusterrandom">
                                                                                                                                            Cluster
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="fibonacci">
                                                                                                                                            Fibonacci
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="golden">
                                                                                                                                            Golden
                                                                                                                        </option>
                                                                                                                        <option
                                                                                                                                            value="custom">
                                                                                                                                            Custom
                                                                                                                                            Pattern
                                                                                                                        </option>

                                                                                                    </select>

                                                                                                    <div
                                                                                                                        style="display: flex; flex-direction: row; gap: 50px;">
                                                                                                                        <div
                                                                                                                                            style="text-align: center; justify-items: center; align-items: center;">
                                                                                                                                            <label
                                                                                                                                                                class="arp-toggle-label">On
                                                                                                                                                                <input type="checkbox"
                                                                                                                                                                                    id="arp-toggle" />
                                                                                                                                                                <span
                                                                                                                                                                                    class="arp-toggle-custom"></span>
                                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <div
                                                                                                                                            style=" justify-items: center; align-items: center;">
                                                                                                                                            <label
                                                                                                                                                                class="arp-toggle-label">Latch
                                                                                                                                                                <input type="checkbox"
                                                                                                                                                                                    id="arp-latch">
                                                                                                                                                                <span
                                                                                                                                                                                    class="arp-toggle-custom"></span>
                                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                    </div>
                                                                                </div>
                                                                                <button id="arp-view-toggle"
                                                                                                    class="preset-button hidden lcd-button"
                                                                                                    style="margin-top: 10px;">
                                                                                                    Show Sliders
                                                                                </button>
                                                                                <div class="arp-container">
                                                                                                    <div
                                                                                                                        class="arp-sliders">
                                                                                                                        <div
                                                                                                                                            style="display: flex; flex-direction: column;">
                                                                                                                                            <label
                                                                                                                                                                for="arp-division">Division</label>
                                                                                                                                            <select style="width: 14rem;"
                                                                                                                                                                class="lcd-select"
                                                                                                                                                                id="arp-division">
                                                                                                                                                                <option
                                                                                                                                                                                    value="1/1">
                                                                                                                                                                                    Whole
                                                                                                                                                                                    (1/1)
                                                                                                                                                                </option>
                                                                                                                                                                <option
                                                                                                                                                                                    value="1/2">
                                                                                                                                                                                    Half
                                                                                                                                                                                    (1/2)
                                                                                                                                                                </option>
                                                                                                                                                                <option
                                                                                                                                                                                    value="1/4">
                                                                                                                                                                                    Quarter
                                                                                                                                                                                    (1/4)
                                                                                                                                                                </option>

                                                                                                                                            </select>
                                                                                                                        </div>
                                                                                                                        <div
                                                                                                                                            class="slider-div">
                                                                                                                                            <label
                                                                                                                                                                for="arp-bpm">
                                                                                                                                                                BPM</label>
                                                                                                                                            <div
                                                                                                                                                                class="range-knob-wrapper">
                                                                                                                                                                <input type="range" id="arp-bpm"
                                                                                                                                                                                    min="40"
                                                                                                                                                                                    max="300"
                                                                                                                                                                                    step="1"
                                                                                                                                                                                    value="120">
                                                                                                                                                                <div
                                                                                                                                                                                    class="range-knob">
                                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <span id="arp-bpm-val"
                                                                                                                                                                class="lcd-text">0.25s</span>
                                                                                                                        </div>

                                                                                                                        <div
                                                                                                                                            class="slider-div">
                                                                                                                                            <label
                                                                                                                                                                for="arp-octaves">
                                                                                                                                                                Range</label>
                                                                                                                                            <div
                                                                                                                                                                class="range-knob-wrapper">
                                                                                                                                                                <input type="range" id="arp-octaves"
                                                                                                                                                                                    min="1"
                                                                                                                                                                                    max="6"
                                                                                                                                                                                    value="6"
                                                                                                                                                                                    step="1" />
                                                                                                                                                                <div
                                                                                                                                                                                    class="range-knob">
                                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <span id="arp-octaves-value"
                                                                                                                                                                class="lcd-text">6</span>
                                                                                                                        </div>

                                                                                                                        <div
                                                                                                                                            class="slider-div">
                                                                                                                                            <label
                                                                                                                                                                for="arp-swing">Swing</label>
                                                                                                                                            <div
                                                                                                                                                                class="range-knob-wrapper">
                                                                                                                                                                <input type="range" id="arp-swing"
                                                                                                                                                                                    min="0"
                                                                                                                                                                                    max="0.5"
                                                                                                                                                                                    step="0.01"
                                                                                                                                                                                    value="0">
                                                                                                                                                                <div
                                                                                                                                                                                    class="range-knob">
                                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <span id="arp-swing-val"
                                                                                                                                                                class="lcd-text">0.00</span>
                                                                                                                        </div>

                                                                                                                        <div
                                                                                                                                            class="slider-div">
                                                                                                                                            <label
                                                                                                                                                                for="gateTimeSlider">Gate</label>
                                                                                                                                            <div
                                                                                                                                                                class="range-knob-wrapper">
                                                                                                                                                                <input type="range" id="gateTimeSlider"
                                                                                                                                                                                    min="0.05"
                                                                                                                                                                                    max="1.0"
                                                                                                                                                                                    step="0.01"
                                                                                                                                                                                    value="0.9" />
                                                                                                                                                                <div
                                                                                                                                                                                    class="range-knob">
                                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <span id="gateTimeValue"
                                                                                                                                                                class="lcd-text">0.9</span>
                                                                                                                        </div>

                                                                                                                        <div
                                                                                                                                            style="display: flex; flex-direction: column; margin-left: 50px;">
                                                                                                                                            <label
                                                                                                                                                                for="ratchet-count">Ratchet</label>
                                                                                                                                            <select style="width: 150px;"
                                                                                                                                                                class="lcd-select"
                                                                                                                                                                id="ratchet-count">
                                                                                                                                                                <option
                                                                                                                                                                                    value="1">
                                                                                                                                                                                    1x
                                                                                                                                                                                    (Off)
                                                                                                                                                                </option>
                                                                                                                                                                <option
                                                                                                                                                                                    value="2">
                                                                                                                                                                                    2x
                                                                                                                                                                </option>
                                                                                                                                                                <option
                                                                                                                                                                                    value="3">
                                                                                                                                                                                    3x
                                                                                                                                                                </option>
                                                                                                                                                                <option
                                                                                                                                                                                    value="4">
                                                                                                                                                                                    4x
                                                                                                                                                                </option>
                                                                                                                                                                <option
                                                                                                                                                                                    value="6">
                                                                                                                                                                                    6x
                                                                                                                                                                </option>
                                                                                                                                                                <option
                                                                                                                                                                                    value="8">
                                                                                                                                                                                    8x
                                                                                                                                                                </option>
                                                                                                                                            </select>
                                                                                                                                            <div
                                                                                                                                                                style="display: flex; flex-direction: column;">

                                                                                                                                                                <label
                                                                                                                                                                                    class="arp-toggle-label">Randomize
                                                                                                                                                                                    <input type="checkbox"
                                                                                                                                                                                                        id="random-ratchet" />
                                                                                                                                                                                    <span
                                                                                                                                                                                                        class="arp-toggle-custom"></span>
                                                                                                                                                                </label>

                                                                                                                                            </div>
                                                                                                                        </div>



                                                                                                    </div>

                                                                                                    <div
                                                                                                                        class="arp-roll hidden">
                                                                                                                        <div id="piano-roll"
                                                                                                                                            class="piano-roll-grid">
                                                                                                                        </div>
                                                                                                                        <button class="lcd-button"
                                                                                                                                            id="apply-pattern">Apply
                                                                                                                                            Pattern</button>
                                                                                                    </div>
                                                                                </div>
                                                            </div>


                                                            <div id="mod-ui" class="hidden"></div>
                                                            <div id="synth-controls"></div>
                                                            <div id="fx-bank" class="effects"></div>
                                                            <div
                                                                                style="color: rgb(230, 230, 230); text-align: center; font-weight: bolder; font-size: large;">
                                                                                FX Chain
                                                            </div>
                                                            <div tabindex="0" id="fx-chain" class="effect-chain">
                                                                                Drop
                                                                                Effects
                                                                                Here</div>
                                        </div>

                    </div>

                    <div id="aria-status" class="visually-hidden" aria-live="polite" aria-atomic="true"></div>


                    <script src='https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js'></script>
                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
                    <script type="module" src="src/main.js"></script>
                    <script src="src/utils/toggle.js"></script>
                    <script src="src/rotary.js"></script>
                    <!-- <script src="src/utils/focus.js"></script> -->
                    <script src="src/UI/theme.js"></script>
                    <script src="src/manual/manual.js"></script>

</body>

</html>